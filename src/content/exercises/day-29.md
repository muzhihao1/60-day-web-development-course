---
day: 29
title: "React Routerè·¯ç”±ç»ƒä¹ "
description: "é€šè¿‡å®é™…é¡¹ç›®æŒæ¡React Router v6çš„æ ¸å¿ƒåŠŸèƒ½ï¼ŒåŒ…æ‹¬åŠ¨æ€è·¯ç”±ã€åµŒå¥—è·¯ç”±ã€è·¯ç”±å®ˆå«ç­‰"
difficulty: "intermediate"
estimatedTime: 180
requirements:
  - "åšå®¢åº”ç”¨è·¯ç”±ç³»ç»Ÿ"
  - "å¤šæ­¥è¡¨å•å‘å¯¼"
  - "å—ä¿æŠ¤çš„ä»ªè¡¨æ¿"
---

# Day 29: React Routerè·¯ç”±ç»ƒä¹ 

## ğŸ¯ ç»ƒä¹ ç›®æ ‡

ä»Šå¤©çš„ç»ƒä¹ å°†å¸®åŠ©ä½ æŒæ¡React Router v6çš„å®é™…åº”ç”¨ã€‚é€šè¿‡æ„å»ºçœŸå®çš„é¡¹ç›®ï¼Œä½ å°†å­¦ä¼šå¦‚ä½•è®¾è®¡å’Œå®ç°å¤æ‚çš„è·¯ç”±ç³»ç»Ÿï¼Œå¤„ç†è®¤è¯æˆæƒï¼Œä»¥åŠä¼˜åŒ–è·¯ç”±æ€§èƒ½ã€‚

## ğŸ“ ç»ƒä¹ è¯´æ˜

### ç»ƒä¹  1ï¼šåšå®¢åº”ç”¨è·¯ç”±ç³»ç»Ÿ

åˆ›å»ºä¸€ä¸ªåŠŸèƒ½å®Œæ•´çš„åšå®¢åº”ç”¨ï¼Œè¦æ±‚å®ç°ï¼š

**è·¯ç”±ç»“æ„è®¾è®¡**ï¼š
```
/                     # é¦–é¡µï¼ˆæ–‡ç« åˆ—è¡¨ï¼‰
/posts               # æ–‡ç« åˆ—è¡¨ï¼ˆåŒé¦–é¡µï¼‰
/posts/:id           # æ–‡ç« è¯¦æƒ…
/categories          # åˆ†ç±»åˆ—è¡¨
/categories/:slug    # åˆ†ç±»ä¸‹çš„æ–‡ç« 
/search              # æœç´¢ç»“æœé¡µ
/about               # å…³äºé¡µé¢
/404                 # 404é¡µé¢
```

**æ ¸å¿ƒåŠŸèƒ½è¦æ±‚**ï¼š
- æ–‡ç« åˆ—è¡¨æ”¯æŒåˆ†é¡µï¼ˆä½¿ç”¨æŸ¥è¯¢å‚æ•° `?page=1`ï¼‰
- åˆ†ç±»ç­›é€‰ï¼ˆä½¿ç”¨æŸ¥è¯¢å‚æ•° `?category=react`ï¼‰
- æœç´¢åŠŸèƒ½ï¼ˆä½¿ç”¨æŸ¥è¯¢å‚æ•° `?q=keyword`ï¼‰
- å“åº”å¼å¯¼èˆªèœå•
- é¢åŒ…å±‘å¯¼èˆª
- ç›¸å…³æ–‡ç« æ¨è

### ç»ƒä¹  2ï¼šå¤šæ­¥è¡¨å•å‘å¯¼

æ„å»ºä¸€ä¸ªç”¨æˆ·æ³¨å†Œå‘å¯¼ï¼ŒåŒ…å«ä»¥ä¸‹æ­¥éª¤ï¼š

1. **ä¸ªäººä¿¡æ¯**ï¼šå§“åã€ç”Ÿæ—¥ã€æ€§åˆ«
2. **è”ç³»æ–¹å¼**ï¼šé‚®ç®±ã€æ‰‹æœºã€åœ°å€
3. **è´¦æˆ·è®¾ç½®**ï¼šç”¨æˆ·åã€å¯†ç ã€å®‰å…¨é—®é¢˜
4. **ç¡®è®¤æäº¤**ï¼šæ˜¾ç¤ºæ‰€æœ‰ä¿¡æ¯ä¾›ç¡®è®¤

**æŠ€æœ¯è¦æ±‚**ï¼š
- æ¯ä¸ªæ­¥éª¤å¯¹åº”ä¸€ä¸ªè·¯ç”±
- æ­¥éª¤é—´å¯ä»¥è‡ªç”±åˆ‡æ¢ï¼ˆå·²å¡«å†™çš„æ­¥éª¤ï¼‰
- æœªå®Œæˆçš„æ­¥éª¤ä¸èƒ½è·³è¿‡
- åˆ·æ–°é¡µé¢åä¿æŒå½“å‰æ­¥éª¤å’Œæ•°æ®
- æäº¤æˆåŠŸåæ¸…é™¤æ‰€æœ‰æ•°æ®

### ç»ƒä¹  3ï¼šå—ä¿æŠ¤çš„ä»ªè¡¨æ¿

åˆ›å»ºä¸€ä¸ªä¼ä¸šçº§ä»ªè¡¨æ¿åº”ç”¨ï¼š

**ç”¨æˆ·è§’è‰²**ï¼š
- è®¿å®¢ï¼šåªèƒ½è®¿é—®å…¬å¼€é¡µé¢
- ç”¨æˆ·ï¼šå¯ä»¥è®¿é—®ä¸ªäººä»ªè¡¨æ¿
- ç®¡ç†å‘˜ï¼šå¯ä»¥è®¿é—®æ‰€æœ‰é¡µé¢

**é¡µé¢ç»“æ„**ï¼š
```
/                    # å…¬å¼€é¦–é¡µ
/login              # ç™»å½•é¡µé¢
/register           # æ³¨å†Œé¡µé¢
/dashboard          # ç”¨æˆ·ä»ªè¡¨æ¿ï¼ˆéœ€è¦ç™»å½•ï¼‰
/profile            # ä¸ªäººèµ„æ–™ï¼ˆéœ€è¦ç™»å½•ï¼‰
/settings           # è®¾ç½®é¡µé¢ï¼ˆéœ€è¦ç™»å½•ï¼‰
/admin              # ç®¡ç†é¢æ¿ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
/admin/users        # ç”¨æˆ·ç®¡ç†ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
/admin/stats        # ç»Ÿè®¡æ•°æ®ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰
```

## ğŸ’¡ å®ç°æç¤º

### è·¯ç”±é…ç½®æœ€ä½³å®è·µ

```jsx
// é›†ä¸­ç®¡ç†è·¯ç”±é…ç½®
const routes = [
  {
    path: '/',
    element: <Layout />,
    children: [
      { index: true, element: <Home /> },
      { path: 'posts/:id', element: <PostDetail /> },
      // ... å…¶ä»–è·¯ç”±
    ]
  }
];

// ä½¿ç”¨è·¯ç”±é…ç½®ç”ŸæˆRoutes
function renderRoutes(routes) {
  return routes.map(route => (
    <Route key={route.path} {...route}>
      {route.children && renderRoutes(route.children)}
    </Route>
  ));
}
```

### è·¯ç”±å®ˆå«å®ç°

```jsx
function RequireAuth({ children, role }) {
  const { user } = useAuth();
  const location = useLocation();
  
  if (!user) {
    return <Navigate to="/login" state={{ from: location }} />;
  }
  
  if (role && user.role !== role) {
    return <Navigate to="/unauthorized" />;
  }
  
  return children;
}
```

### é¢åŒ…å±‘å¯¼èˆªå®ç°

```jsx
function useBreadcrumbs() {
  const location = useLocation();
  const matches = useMatches();
  
  return matches
    .filter(match => match.handle?.crumb)
    .map(match => ({
      path: match.pathname,
      label: match.handle.crumb(match.data)
    }));
}
```

## ğŸ¨ æ ·å¼å»ºè®®

ä¸ºä½ çš„åº”ç”¨æ·»åŠ ä¸“ä¸šçš„æ ·å¼ï¼š

```css
/* å¯¼èˆªæ¿€æ´»çŠ¶æ€ */
.nav-link {
  padding: 0.5rem 1rem;
  text-decoration: none;
  transition: all 0.3s ease;
}

.nav-link.active {
  color: #007bff;
  border-bottom: 2px solid #007bff;
}

/* åŠ è½½çŠ¶æ€ */
.route-loading {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, #007bff 0%, #0056b3 50%, #007bff 100%);
  animation: loading 1.5s ease-in-out infinite;
}

/* æ­¥éª¤å¯¼èˆª */
.step-indicator {
  display: flex;
  justify-content: space-between;
  margin-bottom: 2rem;
}

.step {
  flex: 1;
  text-align: center;
  position: relative;
}

.step.completed::after {
  content: 'âœ“';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
```

## ğŸš€ æ‰©å±•æŒ‘æˆ˜

å¦‚æœä½ å®Œæˆäº†åŸºç¡€ç»ƒä¹ ï¼Œå¯ä»¥å°è¯•ä»¥ä¸‹æ‰©å±•ï¼š

1. **æ€§èƒ½ä¼˜åŒ–**ï¼š
   - å®ç°è·¯ç”±é¢„åŠ è½½
   - æ·»åŠ é¡µé¢è¿‡æ¸¡åŠ¨ç”»
   - å®ç°è™šæ‹Ÿæ»šåŠ¨çš„æ–‡ç« åˆ—è¡¨

2. **é«˜çº§åŠŸèƒ½**ï¼š
   - å®ç°è·¯ç”±å†å²è®°å½•ç®¡ç†
   - æ·»åŠ å¿«æ·é”®å¯¼èˆª
   - å®ç°ç¦»çº¿ç¼“å­˜æ”¯æŒ

3. **ç”¨æˆ·ä½“éªŒ**ï¼š
   - æ·»åŠ éª¨æ¶å±åŠ è½½çŠ¶æ€
   - å®ç°å¹³æ»‘çš„æ»šåŠ¨æ¢å¤
   - æ·»åŠ è·¯ç”±åˆ‡æ¢è¿›åº¦æ¡

## ğŸ“¤ æäº¤è¦æ±‚

å®Œæˆç»ƒä¹ åï¼Œè¯·ç¡®ä¿ä½ çš„ä»£ç åŒ…å«ï¼š

1. å®Œæ•´çš„è·¯ç”±é…ç½®å’Œç»„ä»¶å®ç°
2. æ¸…æ™°çš„ä»£ç æ³¨é‡Š
3. é”™è¯¯å¤„ç†å’ŒåŠ è½½çŠ¶æ€
4. å“åº”å¼è®¾è®¡æ”¯æŒ
5. åŸºæœ¬çš„å•å…ƒæµ‹è¯•ï¼ˆå¯é€‰ï¼‰

å°†ä½ çš„ä»£ç æäº¤åˆ°GitHubä»“åº“ï¼Œå¹¶åœ¨READMEä¸­è¯´æ˜å®ç°çš„åŠŸèƒ½å’Œä½¿ç”¨çš„æŠ€æœ¯æ ˆã€‚

ç¥ä½ ç¼–ç æ„‰å¿«ï¼ğŸ‰